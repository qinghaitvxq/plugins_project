# Documentation

This is the complete documentation of the plugin. Please take also
a look at the [demo page](https://benediktschmitt.github.io/js-TreeView).


## Features

*   Displays arbitrary tree structures
*   Highly customizable by providing own model functions and render functions
*   Very lazy: Nodes are only loaded, when they are needed.


## Specification


### css

Each node has a well defined state and each state corresponds to one of the
css classes below. If a node matches the state, the associated css class is
visible, otherwise hidden.

*   **node-not-loaded**

    The children of the node have not been loaded from the model yet.

*   **node-loading**

    We are currently loading the children of the node from the model.

*   **node-loaded**

    The children of the node has been loaded from the model.

*   **node-empty**

    The node has no children.

    Requires: *node-loaded*

*   **node-not-empty**

    The node has at least one child.

    Requires: *node-loaded*

*   **node-collapsed**

    The node's children are currently hidden.

    Requires: *node-loaded*

*   **node-expanded**

    The node's children are currently visible.

    Requires: *node-loaded*


### data-*

You can use these ``data-*`` attributes to trigger some events:


*   **data-expand="node"**

    If the element is clicked, the node is expanded, so that its children are
    visible.

*   **data-collapse="node"**

    If the element is clicked, the node is collapsed, so that its children are
    hidden.

*   **data-select="node"**

    If the element is clicked, the node is selected. This means that the value
    of all input elements in the tree is set to the node id.


### input

You can place an input element into the tree view. This allows the user in
combination with ``data-select="node"`` to select a node.

```html
<div id="my-tree-view">
    <!-- ... -->
    <input type="hidden" name="node_id">
</div>
```


### HTML template

This is an example html template for a node.

```html
<!--
    We use the doT.js markup. Feel free to use any template engine you want.
-->
<template>
    <div class="node" data-node="{{= it.node_id }}">
        <span class="node-body">
            <!-- Please note the use of the classes and data attributes. -->
            <span class="node-not-loaded" data-expand="node">
                <span class="glyphicon glyphicon-folder-close"></span>
            </span>
            <span class="node-loading">
                <span class="glyphicon glyphicon-refresh"></span>
            </span>
            <span class="node-loaded">
                <span class="node-empty">
                    ...
                </span>
                <span class="node-not-empty">
                    <span class="node-expanded" data-collapse="node">
                        <span class="glyphicon glyphicon-folder-open"></span>
                    </span>
                    <span class="node-collapsed" data-expand="node">
                        <span class="glyphicon glyphicon-folder-close"></span>
                    </span>
                </span>
            </span>

            <span data-select="node">
                {{= it.node.name }}
            </span>
        </span>
        <div class="node-children">
            <!--
                As soon as the subfolders are loaded from the server, the
                subtree will be inserted.

                These are always rendered entities of this template.
            -->
        </div>
    </div>
</template>
```


### API


#### jQuery#treeView("init", options)

Initialises the tree view widget.

```javascript
jQuery("#my-tree-view").treeView({
    // Returns the id of the node, based on the node object itself.
    node_id: function(node){ ... },

    // Returns the root node of the tree.
    root_node: function(){ ... },

    // Returns the parent of the node.
    parent_node: function(node_id){ ... },

    // Returns a list with all children of the node.
    child_nodes: function(node_id){ ... },

    // Returns the html, which is used to display the node.
    // Please take a look at the html template documentation.
    render_node: function(node_id, node){ ... }
});
```


#### jQuery#treeView("collapse", node_id)

Hides the children of the node with the id *node_id*.

```javascript
jQuery("#my-tree-view").treeView("collapse", 42);
```


#### jQuery#treeView("collapse_all")

Hides the children of *each* node in the tree. Please note, that this is not
equal to collapsing the root node.

```javascript
jQuery("#my-tree-view").treeView("collapse_all");
```


#### jQuery#treeView("unload_node", node_id)

Removes the node with the id *node_id* from the view. The next time the node
should be expanded, it is completly reloaded.

```javascript
jQuery("#my-tree-view").treeView("unload_node", 42);
```


#### jQuery#treeView("expand", node_id)

Shows the children of the node with the id *node_id*. This is the reverse
operation to ``treeView("collapse", node_id)``. When the children have not been
loaded yet, they are loaded now.

```javascript
jQuery("#my-tree-view").treeView("expand", 42);
```


#### jQuery#treeView("expand_to", node_id)

Expands all *parents* of the node with the id *node_id*. The node itself is
not expanded. If the parents have not been loaded yet, they are loaded now.

```javascript
jQuery("#my-tree-view").treeView("expand_to", 42);
```


#### jQuery#treeView("select", node_id)

Selects the node with the id *node_id*. Using this method requires an input
element in the dom tree.

```javascript
jQuery("#my-tree-view").treeView("select", 42);
```


#### jQuery#treeView("selection")

Returns the id of the selected node. Using this method requires an input
element in the dom tree.

```javascript
jQuery("#my-tree-view").treeView("select", 42);
jQuery("#my-tree-view").treeView("selection") == 42;
```
